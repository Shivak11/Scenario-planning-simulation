openapi: 3.1.0
info:
  title: Strategic Futures Lab - Force Generation API
  description: |
    AI-powered PEST force generation API for scenario planning simulation.
    Generates 16 context-aware driving forces using Anthropic's Claude AI.
  version: 1.0.0
  contact:
    name: Strategic Futures Lab
servers:
  - url: http://localhost:3000
    description: Development server
  - url: https://strategic-futures-lab.vercel.app
    description: Production server (if deployed)
paths:
  /api/generate-forces:
    post:
      summary: Generate PEST Forces
      description: |
        Generates 16 PEST-categorized driving forces based on user's strategic context.
        Uses Claude AI to create industry-specific, high-quality forces with suggested
        impact and uncertainty ratings. Forces are returned with IDs and default ratings
        of 0 (user must actively rate them).
      operationId: generateForces
      tags:
        - AI Generation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - industry
                - organizationType
                - challenge
              properties:
                industry:
                  type: string
                  description: Industry sector ID from INDUSTRIES taxonomy
                  example: bfsi
                  enum:
                    - bfsi
                    - it-services
                    - manufacturing
                    - pharma
                    - retail
                    - telecom
                    - energy
                    - automotive
                    - real-estate
                    - fmcg
                    - healthcare
                    - education
                organizationType:
                  type: string
                  description: Organization structure type ID
                  example: family-business
                  enum:
                    - family-business
                    - pe-backed
                    - mnc-subsidiary
                    - listed-enterprise
                    - startup
                    - psu
                challenge:
                  type: string
                  description: User's strategic challenge or focal issue description
                  example: How should we position ourselves for the next wave of digital banking regulation?
                  minLength: 10
                  maxLength: 500
                modifiers:
                  type: array
                  description: Optional context modifiers for nuanced force generation
                  items:
                    type: string
                    enum:
                      - high-regulation
                      - low-regulation
                      - cash-rich
                      - cash-constrained
                      - high-growth
                      - mature-market
                      - tech-forward
                      - traditional
                      - export-focused
                      - domestic-focused
                      - founder-led
                      - professional-management
                  example:
                    - high-regulation
                    - cash-rich
                strategicQuestion:
                  type: string
                  description: Explicit strategic question for additional context
                  example: Should we expand into rural markets or deepen urban penetration?
                  maxLength: 300
            examples:
              bfsi-example:
                summary: BFSI Digital Banking Challenge
                value:
                  industry: bfsi
                  organizationType: listed-enterprise
                  challenge: How should we position ourselves for the next wave of digital banking regulation?
                  modifiers:
                    - high-regulation
                    - cash-rich
                  strategicQuestion: Should we lead with compliance-first or innovation-first approach?
              pharma-example:
                summary: Pharma Expansion Strategy
                value:
                  industry: pharma
                  organizationType: family-business
                  challenge: Navigating patent cliffs while building biosimilar capabilities
                  modifiers:
                    - high-regulation
                    - tech-forward
      responses:
        '200':
          description: Successfully generated 16 PEST forces
          content:
            application/json:
              schema:
                type: object
                required:
                  - forces
                properties:
                  forces:
                    type: array
                    description: Array of 16 PEST-categorized forces (4 per category)
                    minItems: 16
                    maxItems: 16
                    items:
                      $ref: '#/components/schemas/Force'
              examples:
                success-response:
                  summary: Example force generation response
                  value:
                    forces:
                      - id: force-1738042800000-0
                        name: RBI Digital Lending Norms
                        description: New regulatory framework for digital lending platforms requiring stricter KYC and credit assessment protocols
                        category: P
                        suggestedImpact: 4
                        suggestedUncertainty: 3
                        impact: 0
                        uncertainty: 0
                        isCustom: false
                      - id: force-1738042800000-1
                        name: UPI Transaction Fee Debate
                        description: Ongoing policy discussions around introducing transaction fees for UPI payments
                        category: P
                        suggestedImpact: 3
                        suggestedUncertainty: 4
                        impact: 0
                        uncertainty: 0
                        isCustom: false
                      - id: force-1738042800000-2
                        name: Interest Rate Volatility
                        description: Fluctuating repo rates impacting lending margins and deposit growth strategies
                        category: E
                        suggestedImpact: 5
                        suggestedUncertainty: 3
                        impact: 0
                        uncertainty: 0
                        isCustom: false
        '500':
          description: Server error during force generation
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                    description: Human-readable error message
                    example: Failed to generate forces. Please try again.
              examples:
                missing-api-key:
                  summary: Missing ANTHROPIC_API_KEY
                  value:
                    error: Missing ANTHROPIC_API_KEY environment variable
                claude-api-error:
                  summary: Claude API call failed
                  value:
                    error: Failed to generate forces. Please try again.
                parse-error:
                  summary: JSON parsing failed
                  value:
                    error: Failed to parse AI response. Please try again.
      security: []
components:
  schemas:
    Force:
      type: object
      required:
        - id
        - name
        - description
        - category
        - suggestedImpact
        - suggestedUncertainty
        - impact
        - uncertainty
        - isCustom
      properties:
        id:
          type: string
          description: Unique force identifier (format: force-{timestamp}-{index})
          pattern: ^force-\d+-\d+$
          example: force-1738042800000-0
        name:
          type: string
          description: Concise 3-5 word force name
          minLength: 5
          maxLength: 50
          example: RBI Digital Lending Norms
        description:
          type: string
          description: One clear sentence explaining the force's impact and uncertainty
          minLength: 20
          maxLength: 300
          example: New regulatory framework for digital lending platforms requiring stricter KYC and credit assessment protocols
        category:
          type: string
          description: PEST category classification
          enum:
            - P
            - E
            - S
            - T
            - En
            - L
          example: P
        suggestedImpact:
          type: integer
          description: AI-suggested impact rating (1-5 scale, user should actively confirm)
          minimum: 1
          maximum: 5
          example: 4
        suggestedUncertainty:
          type: integer
          description: AI-suggested uncertainty rating (1-5 scale, user should actively confirm)
          minimum: 1
          maximum: 5
          example: 3
        impact:
          type: integer
          description: User-confirmed impact rating (0 = Not Rated, user must actively rate)
          minimum: 0
          maximum: 5
          example: 0
        uncertainty:
          type: integer
          description: User-confirmed uncertainty rating (0 = Not Rated, user must actively rate)
          minimum: 0
          maximum: 5
          example: 0
        isCustom:
          type: boolean
          description: Whether force was user-created (false for AI-generated)
          example: false
    PESTCategory:
      type: string
      description: |
        PEST force categories:
        - P: Political (government policy, regulation, trade)
        - E: Economic (markets, currency, interest rates)
        - S: Social (demographics, culture, consumer behavior)
        - T: Technological (innovation, digital transformation, automation)
        - En: Environmental (climate, sustainability, ESG)
        - L: Legal (compliance, litigation, intellectual property)
      enum:
        - P
        - E
        - S
        - T
        - En
        - L
tags:
  - name: AI Generation
    description: AI-powered force generation using Claude API
